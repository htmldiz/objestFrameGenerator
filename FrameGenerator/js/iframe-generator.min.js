!function(){let t=function(){let t=this;document.addEventListener("DOMContentLoaded",e=>{t.initAllItems()})};t.prototype.initAllItems=function(t){let e=this;document.querySelectorAll("[data-objest-frame-generator-list-item]").forEach(t=>{e.initItem(t,e)})},t.prototype.initItem=function(t){let e=new this.Element(t);e.generate_id(),e.InitFrame(),e.InitMessage()},t.prototype.Element=function(t){this.oldDataString="",this.updatedDataString="",this.data={},this.updatedData={},this._element=t,this.frameStyle=t.getAttribute("data-frame-style"),this.src=t.getAttribute("data-objest-frame-generator-list-item")},t.prototype.Element.prototype.sanitizeString=function(t){return(t=t.replace(/[:|\/|.]/gm,"")).trim()},t.prototype.Element.prototype.generate_id=function(){this.id=this.sanitizeString(this.src+Math.random().toString(36).substr(2,9))},t.prototype.Element.prototype.InitFrame=function(){let t=new URL(this.src);t.searchParams.append("__frame_id__",this.id),t.searchParams.append("__frame_data__",this.frameStyle),t=t.toString(),this._element.innerHTML='<iframe src="'+t+'" id="'+this.id+'" width="100%"></iframe>'},t.prototype.Element.prototype.update=function(){this.updatedDataString!==this.oldDataString&&(this.data=this.updatedData,this.oldDataString=this.updatedDataString,this._element.querySelectorAll("iframe")[0].style.height=this.data.height)},t.prototype.Element.prototype.parseData=function(t){this.updatedDataString=t,this.updatedData=JSON.parse(t)},t.prototype.Element.prototype.clearUrl=function(t){return t=(t=t.replace(/https/g,"")).replace(/http/g,"")},t.prototype.Element.prototype.InitMessage=function(){let t=this;window.addEventListener("message",e=>{let i=t.clearUrl(e.origin),a=new URL(t.src).origin;if((a=t.clearUrl(a))===i)t.parseData(e.data),this.updatedData.__frame_id__===t.id&&t.update()},!1)},t.prototype.init=function(t){this.Element=t,this.src=t.getAttribute("data-objest-frame-generator-list-item")},window.objestFrameGenerator=new t}(window,document);
